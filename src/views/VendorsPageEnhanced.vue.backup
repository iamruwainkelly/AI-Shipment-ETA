<template>
  <div class="vendors-page-enhanced">
    <!-- Page Header -->
    <div class="mb-8 flex justify-between items-start">
      <div>
        <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-2">Vendor Management</h1>
        <p class="text-gray-600 dark:text-gray-400">Manage vendor relationships, performance metrics, and cost analysis</p>
      </div>
      <DarkModeToggle />
    </div>

    <!-- Statistics Dashboard -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
      <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6 stat-card">
        <div class="flex items-center">
          <div class="p-3 rounded-full bg-blue-100 dark:bg-blue-900">
            <Building2 class="h-6 w-6 text-blue-600 dark:text-blue-400" />
          </div>
          <div class="ml-4">
            <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Total Vendors</p>
            <p class="text-2xl font-semibold text-gray-900 dark:text-white">{{ vendorsStore.totalVendors }}</p>
          </div>
        </div>
      </div>

      <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6 stat-card">
        <div class="flex items-center">
          <div class="p-3 rounded-full bg-green-100 dark:bg-green-900">
            <CheckCircle class="h-6 w-6 text-green-600 dark:text-green-400" />
          </div>
          <div class="ml-4">
            <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Active Vendors</p>
            <p class="text-2xl font-semibold text-gray-900 dark:text-white">{{ vendorsStore.activeVendorsCount }}</p>
          </div>
        </div>
      </div>

      <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6 stat-card">
        <div class="flex items-center">
          <div class="p-3 rounded-full bg-yellow-100 dark:bg-yellow-900">
            <Star class="h-6 w-6 text-yellow-600 dark:text-yellow-400" />
          </div>
          <div class="ml-4">
            <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Avg Performance</p>
            <p class="text-2xl font-semibold text-gray-900 dark:text-white">{{ vendorsStore.averagePerformanceScore }}/100</p>
          </div>
        </div>
      </div>

      <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6 stat-card">
        <div class="flex items-center">
          <div class="p-3 rounded-full bg-purple-100 dark:bg-purple-900">
            <DollarSign class="h-6 w-6 text-purple-600 dark:text-purple-400" />
          </div>
          <div class="ml-4">
            <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Avg Cost/kg</p>
            <p class="text-2xl font-semibold text-gray-900 dark:text-white">${{ vendorsStore.averageCostPerKg }}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Performance Analytics and Insights -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
      <!-- Performance Distribution -->
      <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6 analytics-section">
        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center">
          <TrendingUp class="h-5 w-5 mr-2" />
          Performance Tiers
        </h3>
        <div class="space-y-3">
          <div v-for="(count, tier) in vendorsStore.vendorsByPerformanceTier" :key="tier" class="flex justify-between items-center">
            <span class="text-sm text-gray-600 dark:text-gray-400">{{ tier }}</span>
            <div class="flex items-center">
              <div class="w-20 h-2 bg-gray-200 dark:bg-gray-700 rounded-full mr-2">
                <div 
                  class="h-2 rounded-full" 
                  :class="{
                    'bg-green-500': tier === 'Excellent',
                    'bg-blue-500': tier === 'Good',
                    'bg-yellow-500': tier === 'Average',
                    'bg-red-500': tier === 'Below Average'
                  }"
                  :style="{ width: (count / vendorsStore.totalVendors * 100) + '%' }"
                ></div>
              </div>
              <span class="text-sm font-medium text-gray-900 dark:text-white">{{ count }}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Top Performers -->
      <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center">
          <Trophy class="h-5 w-5 mr-2" />
          Top Performers
        </h3>
        <div class="space-y-3">
          <div 
            v-for="(vendor, index) in vendorsStore.topPerformingVendors" 
            :key="vendor.id"
            class="flex items-center justify-between top-performer-item"
          >
            <div class="flex items-center">
              <div class="w-6 h-6 bg-indigo-100 dark:bg-indigo-900 rounded-full flex items-center justify-center mr-3">
                <span class="text-xs font-medium text-indigo-600 dark:text-indigo-400">{{ index + 1 }}</span>
              </div>
              <div>
                <p class="text-sm font-medium text-gray-900 dark:text-white">{{ vendor.name }}</p>
                <p class="text-xs text-gray-500 dark:text-gray-400">{{ vendor.on_time_rate }}% on-time</p>
              </div>
            </div>
            <div class="text-right">
              <p class="text-sm font-medium text-gray-900 dark:text-white">{{ vendor.performance_score }}</p>
              <p class="text-xs text-gray-500 dark:text-gray-400">score</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Cost Analysis -->
      <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center">
          <Calculator class="h-5 w-5 mr-2" />
          Cost Analysis
        </h3>
        <div class="space-y-4">
          <div class="flex justify-between items-center">
            <span class="text-sm text-gray-600 dark:text-gray-400">Most Economical</span>
            <span class="text-sm font-medium text-green-600 dark:text-green-400">${{ mostEconomicalVendor?.cost_per_kg || 'N/A' }}/kg</span>
          </div>
          <div class="flex justify-between items-center">
            <span class="text-sm text-gray-600 dark:text-gray-400">Premium Service</span>
            <span class="text-sm font-medium text-blue-600 dark:text-blue-400">${{ premiumVendor?.cost_per_kg || 'N/A' }}/kg</span>
          </div>
          <div class="flex justify-between items-center">
            <span class="text-sm text-gray-600 dark:text-gray-400">Total Shipments</span>
            <span class="text-sm font-medium text-gray-900 dark:text-white">{{ formatNumber(vendorsStore.totalShipmentsHandled) }}</span>
          </div>
          <div class="flex justify-between items-center">
            <span class="text-sm text-gray-600 dark:text-gray-400">Avg Delivery Time</span>
            <span class="text-sm font-medium text-gray-900 dark:text-white">{{ vendorsStore.averageDeliveryTime }} days</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Quick Actions and Controls -->
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6 mb-8">
      <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6">
        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4 sm:mb-0">Vendor Directory</h3>
        <div class="flex space-x-3">
          <button
            @click="exportToCSV"
            class="inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
          >
            <Download class="h-4 w-4 mr-2" />
            Export CSV
          </button>
          <button
            @click="showCreateModal = true"
            class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
          >
            <Plus class="h-4 w-4 mr-2" />
            Add Vendor
          </button>
        </div>
      </div>

      <!-- Filters -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4">
        <div class="lg:col-span-2">
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Search</label>
          <div class="relative">
            <Search class="absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400" />
            <input
              v-model="vendorsStore.filters.searchTerm"
              type="text"
              placeholder="Search vendors by name, company, or email..."
              class="pl-10 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm form-input"
            />
          </div>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Region</label>
          <select
            v-model="vendorsStore.filters.region"
            class="block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
          >
            <option value="">All Regions</option>
            <option value="North America">North America</option>
            <option value="Europe">Europe</option>
            <option value="Asia">Asia</option>
            <option value="Global">Global</option>
            <option value="Oceania">Oceania</option>
          </select>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Service Type</label>
          <select
            v-model="vendorsStore.filters.service_type"
            class="block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
          >
            <option value="">All Services</option>
            <option value="Express Delivery">Express Delivery</option>
            <option value="Sea Freight">Sea Freight</option>
            <option value="Air Freight">Air Freight</option>
            <option value="Ground Transport">Ground Transport</option>
            <option value="Rail Transport">Rail Transport</option>
            <option value="Local Delivery">Local Delivery</option>
          </select>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Performance</label>
          <select
            v-model="vendorsStore.filters.performance_tier"
            class="block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
          >
            <option value="">All Levels</option>
            <option value="Excellent">Excellent (95+)</option>
            <option value="Good">Good (85-94)</option>
            <option value="Average">Average (70-84)</option>
            <option value="Below Average">Below Average (&lt;70)</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Vendors Table -->
    <div class="bg-white dark:bg-gray-800 shadow overflow-hidden sm:rounded-lg">
      <div class="px-4 py-5 sm:p-6">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-lg font-medium text-gray-900 dark:text-white">Vendors Directory</h3>
          <span class="text-sm text-gray-500 dark:text-gray-400">
            {{ vendorsStore.filteredVendors.length }} of {{ vendorsStore.totalVendors }} vendors
          </span>
        </div>

        <div v-if="vendorsStore.loading" class="flex justify-center py-8 loading-container">
          <LoadingSpinner />
        </div>

        <div v-else class="overflow-x-auto">
          <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700 vendors-table">
            <thead class="bg-gray-50 dark:bg-gray-700">
              <tr>
                <th 
                  @click="setSorting('name')"
                  class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600"
                >
                  <div class="flex items-center space-x-1">
                    <span>Vendor</span>
                    <ArrowUpDown class="h-3 w-3" />
                  </div>
                </th>
                <th 
                  @click="setSorting('performance_score')"
                  class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600"
                >
                  <div class="flex items-center space-x-1">
                    <span>Performance</span>
                    <ArrowUpDown class="h-3 w-3" />
                  </div>
                </th>
                <th 
                  @click="setSorting('on_time_rate')"
                  class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600"
                >
                  <div class="flex items-center space-x-1">
                    <span>On-Time Rate</span>
                    <ArrowUpDown class="h-3 w-3" />
                  </div>
                </th>
                <th 
                  @click="setSorting('cost_per_kg')"
                  class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600"
                >
                  <div class="flex items-center space-x-1">
                    <span>Cost/kg</span>
                    <ArrowUpDown class="h-3 w-3" />
                  </div>
                </th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Service Type
                </th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Status
                </th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                  Actions
                </th>
              </tr>
            </thead>
            <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
              <tr 
                v-for="vendor in paginatedVendors"
                :key="vendor.id"
                class="hover:bg-gray-50 dark:hover:bg-gray-700"
              >
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="flex items-center">
                    <div class="flex-shrink-0 h-10 w-10">
                      <div class="h-10 w-10 rounded-full bg-gradient-to-r from-indigo-500 to-purple-600 flex items-center justify-center">
                        <span class="text-sm font-medium text-white">{{ vendor.name.charAt(0) }}</span>
                      </div>
                    </div>
                    <div class="ml-4">
                      <div class="text-sm font-medium text-gray-900 dark:text-white">{{ vendor.name }}</div>
                      <div class="text-sm text-gray-500 dark:text-gray-400">{{ vendor.company }}</div>
                      <div class="text-xs text-gray-400">{{ vendor.region }}</div>
                    </div>
                  </div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="flex items-center">
                    <div class="flex flex-col">
                      <div class="flex items-center">
                        <span class="text-sm font-medium text-gray-900 dark:text-white mr-2">{{ vendor.performance_score }}</span>
                        <div class="w-16 bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                          <div 
                            class="h-2 rounded-full" 
                            :class="{
                              'bg-green-500': vendor.performance_score >= 90,
                              'bg-blue-500': vendor.performance_score >= 80 && vendor.performance_score < 90,
                              'bg-yellow-500': vendor.performance_score >= 70 && vendor.performance_score < 80,
                              'bg-red-500': vendor.performance_score < 70
                            }"
                            :style="{ width: vendor.performance_score + '%' }"
                          ></div>
                        </div>
                      </div>
                      <span 
                        class="mt-1 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium"
                        :class="{
                          'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200': vendor.performance_tier === 'Excellent',
                          'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200': vendor.performance_tier === 'Good',
                          'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200': vendor.performance_tier === 'Average',
                          'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200': vendor.performance_tier === 'Below Average'
                        }"
                      >
                        {{ vendor.performance_tier }}
                      </span>
                    </div>
                  </div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm text-gray-900 dark:text-white">{{ vendor.on_time_rate }}%</div>
                  <div class="text-xs text-gray-500 dark:text-gray-400">{{ vendor.total_shipments }} shipments</div>
                  <div class="text-xs text-gray-500 dark:text-gray-400">{{ vendor.damage_rate }}% damage rate</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm font-medium text-gray-900 dark:text-white">${{ vendor.cost_per_kg }}</div>
                  <div class="text-xs text-gray-500 dark:text-gray-400">{{ vendor.avg_delivery_time }} days avg</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200">
                    {{ vendor.service_type }}
                  </span>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <StatusBadge :status="vendor.status" />
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                  <div class="flex items-center space-x-2">
                    <button
                      @click="viewVendor(vendor)"
                      class="text-indigo-600 dark:text-indigo-400 hover:text-indigo-900 dark:hover:text-indigo-300 action-button action-button-view"
                      title="View Details"
                    >
                      <Eye class="h-4 w-4" />
                    </button>
                    <button
                      @click="editVendor(vendor)"
                      class="text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-300 action-button action-button-edit"
                      title="Edit"
                    >
                      <Edit class="h-4 w-4" />
                    </button>
                    <button
                      @click="deleteVendor(vendor)"
                      class="text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300 action-button action-button-delete"
                      title="Delete"
                    >
                      <Trash2 class="h-4 w-4" />
                    </button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Pagination -->
        <div class="bg-white dark:bg-gray-800 px-4 py-3 flex items-center justify-between border-t border-gray-200 dark:border-gray-700 sm:px-6 mt-4">
          <div class="flex-1 flex justify-between sm:hidden">
            <button
              @click="previousPage"
              :disabled="currentPage === 1"
              class="relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50"
            >
              Previous
            </button>
            <button
              @click="nextPage"
              :disabled="currentPage === totalPages"
              class="ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50"
            >
              Next
            </button>
          </div>
          <div class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
            <div>
              <p class="text-sm text-gray-700 dark:text-gray-300">
                Showing {{ ((currentPage - 1) * itemsPerPage) + 1 }} to 
                {{ Math.min(currentPage * itemsPerPage, vendorsStore.filteredVendors.length) }} of 
                {{ vendorsStore.filteredVendors.length }} results
              </p>
            </div>
            <div>
              <nav class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px">
                <button
                  @click="previousPage"
                  :disabled="currentPage === 1"
                  class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50"
                >
                  <ChevronLeft class="h-5 w-5" />
                </button>
                <button
                  v-for="page in visiblePages"
                  :key="page"
                  @click="currentPage = page"
                  :class="[
                    'relative inline-flex items-center px-4 py-2 border text-sm font-medium',
                    page === currentPage
                      ? 'z-10 bg-indigo-50 dark:bg-indigo-900 border-indigo-500 text-indigo-600 dark:text-indigo-200'
                      : 'bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700'
                  ]"
                >
                  {{ page }}
                </button>
                <button
                  @click="nextPage"
                  :disabled="currentPage === totalPages"
                  class="relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50"
                >
                  <ChevronRight class="h-5 w-5" />
                </button>
              </nav>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Vendor Details Modal -->
    <div v-if="showDetailModal" class="fixed inset-0 z-50 overflow-y-auto">
      <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
        <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" @click="showDetailModal = false"></div>
        <div class="inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full">
          <div class="bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
            <div class="flex justify-between items-center mb-6">
              <h3 class="text-lg font-medium text-gray-900 dark:text-white">Vendor Details</h3>
              <button @click="showDetailModal = false" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300">
                <X class="h-6 w-6" />
              </button>
            </div>
            
            <div v-if="selectedVendor" class="grid grid-cols-1 lg:grid-cols-2 gap-6">
              <!-- Basic Information -->
              <div class="space-y-4">
                <div>
                  <h4 class="text-lg font-medium text-gray-900 dark:text-white mb-3">Basic Information</h4>
                  <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-3">
                    <div class="grid grid-cols-2 gap-3">
                      <div>
                        <label class="block text-sm font-medium text-gray-500 dark:text-gray-400">Name</label>
                        <p class="text-sm text-gray-900 dark:text-white">{{ selectedVendor.name }}</p>
                      </div>
                      <div>
                        <label class="block text-sm font-medium text-gray-500 dark:text-gray-400">Company</label>
                        <p class="text-sm text-gray-900 dark:text-white">{{ selectedVendor.company }}</p>
                      </div>
                      <div>
                        <label class="block text-sm font-medium text-gray-500 dark:text-gray-400">Email</label>
                        <p class="text-sm text-gray-900 dark:text-white">{{ selectedVendor.email }}</p>
                      </div>
                      <div>
                        <label class="block text-sm font-medium text-gray-500 dark:text-gray-400">Phone</label>
                        <p class="text-sm text-gray-900 dark:text-white">{{ selectedVendor.phone }}</p>
                      </div>
                      <div>
                        <label class="block text-sm font-medium text-gray-500 dark:text-gray-400">Region</label>
                        <p class="text-sm text-gray-900 dark:text-white">{{ selectedVendor.region }}</p>
                      </div>
                      <div>
                        <label class="block text-sm font-medium text-gray-500 dark:text-gray-400">Service Type</label>
                        <p class="text-sm text-gray-900 dark:text-white">{{ selectedVendor.service_type }}</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Performance Metrics -->
              <div class="space-y-4">
                <div>
                  <h4 class="text-lg font-medium text-gray-900 dark:text-white mb-3">Performance Metrics</h4>
                  <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-3">
                    <div class="grid grid-cols-2 gap-3">
                      <div>
                        <label class="block text-sm font-medium text-gray-500 dark:text-gray-400">Performance Score</label>
                        <p class="text-lg font-semibold text-gray-900 dark:text-white">{{ selectedVendor.performance_score }}/100</p>
                      </div>
                      <div>
                        <label class="block text-sm font-medium text-gray-500 dark:text-gray-400">On-Time Rate</label>
                        <p class="text-lg font-semibold text-gray-900 dark:text-white">{{ selectedVendor.on_time_rate }}%</p>
                      </div>
                      <div>
                        <label class="block text-sm font-medium text-gray-500 dark:text-gray-400">Total Shipments</label>
                        <p class="text-lg font-semibold text-gray-900 dark:text-white">{{ formatNumber(selectedVendor.total_shipments) }}</p>
                      </div>
                      <div>
                        <label class="block text-sm font-medium text-gray-500 dark:text-gray-400">Damage Rate</label>
                        <p class="text-lg font-semibold text-gray-900 dark:text-white">{{ selectedVendor.damage_rate }}%</p>
                      </div>
                      <div>
                        <label class="block text-sm font-medium text-gray-500 dark:text-gray-400">Cost per Kg</label>
                        <p class="text-lg font-semibold text-gray-900 dark:text-white">${{ selectedVendor.cost_per_kg }}</p>
                      </div>
                      <div>
                        <label class="block text-sm font-medium text-gray-500 dark:text-gray-400">Avg Delivery Time</label>
                        <p class="text-lg font-semibold text-gray-900 dark:text-white">{{ selectedVendor.avg_delivery_time }} days</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Create/Edit Vendor Modal -->
    <div v-if="showCreateModal" class="fixed inset-0 z-50 overflow-y-auto">
      <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
        <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" @click="showCreateModal = false"></div>
        <div class="inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
          <form @submit.prevent="submitVendorForm">
            <div class="bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
              <div class="flex justify-between items-center mb-6">
                <h3 class="text-lg font-medium text-gray-900 dark:text-white">
                  {{ editingVendor ? 'Edit Vendor' : 'Add New Vendor' }}
                </h3>
                <button type="button" @click="showCreateModal = false" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300">
                  <X class="h-6 w-6" />
                </button>
              </div>
              
              <div class="space-y-4">
                <div class="grid grid-cols-2 gap-4">
                  <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Name</label>
                    <input
                      v-model="vendorForm.name"
                      type="text"
                      required
                      class="block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
                    />
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Company</label>
                    <input
                      v-model="vendorForm.company"
                      type="text"
                      required
                      class="block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
                    />
                  </div>
                </div>

                <div class="grid grid-cols-2 gap-4">
                  <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Email</label>
                    <input
                      v-model="vendorForm.email"
                      type="email"
                      required
                      class="block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
                    />
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Phone</label>
                    <input
                      v-model="vendorForm.phone"
                      type="text"
                      class="block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
                    />
                  </div>
                </div>

                <div class="grid grid-cols-2 gap-4">
                  <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Region</label>
                    <select
                      v-model="vendorForm.region"
                      required
                      class="block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
                    >
                      <option value="">Select Region</option>
                      <option value="North America">North America</option>
                      <option value="Europe">Europe</option>
                      <option value="Asia">Asia</option>
                      <option value="Global">Global</option>
                      <option value="Oceania">Oceania</option>
                    </select>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Service Type</label>
                    <select
                      v-model="vendorForm.service_type"
                      required
                      class="block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
                    >
                      <option value="">Select Service</option>
                      <option value="Express Delivery">Express Delivery</option>
                      <option value="Sea Freight">Sea Freight</option>
                      <option value="Air Freight">Air Freight</option>
                      <option value="Ground Transport">Ground Transport</option>
                      <option value="Rail Transport">Rail Transport</option>
                      <option value="Local Delivery">Local Delivery</option>
                    </select>
                  </div>
                </div>

                <div class="grid grid-cols-2 gap-4">
                  <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Cost per Kg ($)</label>
                    <input
                      v-model.number="vendorForm.cost_per_kg"
                      type="number"
                      step="0.01"
                      min="0"
                      class="block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
                    />
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Status</label>
                    <select
                      v-model="vendorForm.status"
                      class="block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
                    >
                      <option value="active">Active</option>
                      <option value="inactive">Inactive</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="bg-gray-50 dark:bg-gray-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
              <button
                type="submit"
                :disabled="submitting"
                class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50"
              >
                {{ submitting ? 'Saving...' : (editingVendor ? 'Update' : 'Create') }}
              </button>
              <button
                type="button"
                @click="showCreateModal = false"
                class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-800 text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"
              >
                Cancel
              </button>
            </div>
            </form>
        </div>
      </div>
    </div>
  </div>

    <!-- Create/Edit Vendor Modal -->
    <div v-if="showCreateModal || showEditModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
      <div class="relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white dark:bg-gray-800">
        <div class="mt-3">
          <div class="flex items-center justify-between mb-4">
            <h3 class="text-lg font-medium text-gray-900 dark:text-white">
              {{ showCreateModal ? 'Add New Vendor' : 'Edit Vendor' }}
            </h3>
            <button
              @click="closeModal"
              class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"
            >
              <X class="h-6 w-6" />
            </button>
          </div>

          <form @submit.prevent="showCreateModal ? createVendor() : updateVendor()" class="space-y-4">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Name *</label>
                <input
                  v-model="vendorForm.name"
                  type="text"
                  required
                  class="block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
                />
              </div>

              <div>
                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Email *</label>
                <input
                  v-model="vendorForm.email"
                  type="email"
                  required
                  class="block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
                />
              </div>

              <div>
                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Phone</label>
                <input
                  v-model="vendorForm.phone"
                  type="tel"
                  class="block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
                />
              </div>

              <div>
                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Certification Level</label>
                <select
                  v-model="vendorForm.certification_level"
                  class="block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
                >
                  <option value="Basic">Basic</option>
                  <option value="Standard">Standard</option>
                  <option value="Premium">Premium</option>
                </select>
              </div>

              <div class="md:col-span-2">
                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Regions Covered</label>
                <input
                  v-model="vendorForm.regions_covered"
                  type="text"
                  placeholder="e.g., West Coast USA, Europe"
                  class="block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
                />
              </div>

              <div>
                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Transport Modes</label>
                <div class="flex space-x-4 mt-2">
                  <label class="flex items-center">
                    <input v-model="selectedTransportModes" value="road" type="checkbox" class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500" />
                    <span class="ml-2 text-sm text-gray-700 dark:text-gray-300">Road</span>
                  </label>
                  <label class="flex items-center">
                    <input v-model="selectedTransportModes" value="air" type="checkbox" class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500" />
                    <span class="ml-2 text-sm text-gray-700 dark:text-gray-300">Air</span>
                  </label>
                  <label class="flex items-center">
                    <input v-model="selectedTransportModes" value="sea" type="checkbox" class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500" />
                    <span class="ml-2 text-sm text-gray-700 dark:text-gray-300">Sea</span>
                  </label>
                </div>
              </div>

              <div>
                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Status</label>
                <select
                  v-model="vendorForm.status"
                  class="block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
                >
                  <option value="active">Active</option>
                  <option value="under_review">Under Review</option>
                  <option value="inactive">Inactive</option>
                </select>
              </div>
            </div>

            <div class="flex justify-end space-x-3 pt-4">
              <button
                type="button"
                @click="closeModal"
                class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
              >
                Cancel
              </button>
              <button
                type="submit"
                class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
              >
                {{ showCreateModal ? 'Create Vendor' : 'Update Vendor' }}
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Vendor Details Modal -->
    <div v-if="showDetailsModal && selectedVendor" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
      <div class="relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-2/3 shadow-lg rounded-md bg-white dark:bg-gray-800">
        <div class="mt-3">
          <div class="flex items-center justify-between mb-6">
            <h3 class="text-lg font-medium text-gray-900 dark:text-white">
              {{ selectedVendor.name }} - Details
            </h3>
            <button
              @click="showDetailsModal = false"
              class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"
            >
              <X class="h-6 w-6" />
            </button>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="space-y-4">
              <div>
                <h4 class="text-sm font-medium text-gray-900 dark:text-white mb-2">Contact Information</h4>
                <div class="bg-gray-50 dark:bg-gray-700 p-3 rounded-md space-y-2">
                  <p class="text-sm"><span class="font-medium">Email:</span> {{ selectedVendor.email }}</p>
                  <p class="text-sm"><span class="font-medium">Phone:</span> {{ selectedVendor.phone }}</p>
                  <p class="text-sm"><span class="font-medium">Regions:</span> {{ selectedVendor.regions_covered }}</p>
                </div>
              </div>

              <div>
                <h4 class="text-sm font-medium text-gray-900 dark:text-white mb-2">Performance Metrics</h4>
                <div class="bg-gray-50 dark:bg-gray-700 p-3 rounded-md space-y-2">
                  <p class="text-sm"><span class="font-medium">Performance Rating:</span> {{ selectedVendor.performance_rating }}/5.0</p>
                  <p class="text-sm"><span class="font-medium">Reliability Score:</span> {{ (selectedVendor.reliability_score * 100).toFixed(1) }}%</p>
                  <p class="text-sm"><span class="font-medium">Risk Score:</span> {{ (selectedVendor.risk_score * 100).toFixed(1) }}%</p>
                </div>
              </div>
            </div>

            <div class="space-y-4">
              <div>
                <h4 class="text-sm font-medium text-gray-900 dark:text-white mb-2">Business Metrics</h4>
                <div class="bg-gray-50 dark:bg-gray-700 p-3 rounded-md space-y-2">
                  <p class="text-sm"><span class="font-medium">Total Shipments:</span> {{ selectedVendor.total_shipments }}</p>
                  <p class="text-sm"><span class="font-medium">On-time Deliveries:</span> {{ selectedVendor.on_time_deliveries }}</p>
                  <p class="text-sm"><span class="font-medium">Monthly Volume:</span> {{ selectedVendor.monthly_volume }}</p>
                  <p class="text-sm"><span class="font-medium">Contract Value:</span> ${{ formatCurrency(selectedVendor.contract_value) }}</p>
                </div>
              </div>

              <div>
                <h4 class="text-sm font-medium text-gray-900 dark:text-white mb-2">Services & Certification</h4>
                <div class="bg-gray-50 dark:bg-gray-700 p-3 rounded-md space-y-2">
                  <p class="text-sm"><span class="font-medium">Certification:</span> {{ selectedVendor.certification_level }}</p>
                  <p class="text-sm"><span class="font-medium">Transport Modes:</span> {{ selectedVendor.transport_modes.split(',').join(', ') }}</p>
                  <div class="text-sm">
                    <span class="font-medium">Specialized Services:</span>
                    <div class="flex flex-wrap gap-1 mt-1">
                      <span 
                        v-for="service in selectedVendor.specialized_services" 
                        :key="service"
                        class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200"
                      >
                        {{ service.replace('_', ' ') }}
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, computed, onMounted, watch } from 'vue'
import { useVendorsEnhancedStore } from '../stores/vendorsEnhanced'
import { useThemeStore } from '../stores/theme'
import {
  Building2,
  CheckCircle,
  Star,
  DollarSign,
  Search,
  Download,
  Plus,
  Eye,
  Edit,
  Trash2,
  X,
  ChevronLeft,
  ChevronRight,
  ArrowUpDown,
  TrendingUp,
  Trophy,
  Calculator
} from 'lucide-vue-next'
import LoadingSpinner from '../components/LoadingSpinner.vue'
import StatusBadge from '../components/StatusBadge.vue'
import DarkModeToggle from '../components/DarkModeToggle.vue'

const vendorsStore = useVendorsEnhancedStore()
const themeStore = useThemeStore()

// Reactive state
const showCreateModal = ref(false)
const showDetailModal = ref(false)
const selectedVendor = ref(null)
const editingVendor = ref(false)
const submitting = ref(false)
const currentPage = ref(1)
const itemsPerPage = ref(10)

// Form data
const vendorForm = ref({
  name: '',
  company: '',
  email: '',
  phone: '',
  region: '',
  service_type: '',
  cost_per_kg: 0,
  status: 'active'
})

// Computed properties
const paginatedVendors = computed(() => {
  const start = (currentPage.value - 1) * itemsPerPage.value
  const end = start + itemsPerPage.value
  return vendorsStore.filteredVendors.slice(start, end)
})

const totalPages = computed(() => {
  return Math.ceil(vendorsStore.filteredVendors.length / itemsPerPage.value)
})

const visiblePages = computed(() => {
  const pages = []
  const maxVisible = 5
  let start = Math.max(1, currentPage.value - Math.floor(maxVisible / 2))
  let end = Math.min(totalPages.value, start + maxVisible - 1)
  
  if (end - start + 1 < maxVisible) {
    start = Math.max(1, end - maxVisible + 1)
  }
  
  for (let i = start; i <= end; i++) {
    pages.push(i)
  }
  return pages
})

const mostEconomicalVendor = computed(() => {
  return vendorsStore.vendors.reduce((min, vendor) => 
    vendor.cost_per_kg < (min?.cost_per_kg || Infinity) ? vendor : min, null)
})

const premiumVendor = computed(() => {
  return vendorsStore.vendors.reduce((max, vendor) => 
    vendor.cost_per_kg > (max?.cost_per_kg || 0) ? vendor : max, null)
})

// Methods
const formatNumber = (num) => {
  if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M'
  if (num >= 1000) return (num / 1000).toFixed(1) + 'K'
  return num.toString()
}

const setSorting = (field) => {
  if (vendorsStore.sortBy === field) {
    vendorsStore.setSorting(field, vendorsStore.sortOrder === 'asc' ? 'desc' : 'asc')
  } else {
    vendorsStore.setSorting(field, 'asc')
  }
}

const exportToCSV = () => {
  vendorsStore.exportToCSV()
}

const viewVendor = (vendor) => {
  selectedVendor.value = vendor
  showDetailModal.value = true
}

const editVendor = (vendor) => {
  selectedVendor.value = vendor
  editingVendor.value = true
  vendorForm.value = {
    name: vendor.name,
    company: vendor.company,
    email: vendor.email,
    phone: vendor.phone,
    region: vendor.region,
    service_type: vendor.service_type,
    cost_per_kg: vendor.cost_per_kg,
    status: vendor.status
  }
  showCreateModal.value = true
}

const deleteVendor = async (vendor) => {
  if (confirm(`Are you sure you want to delete ${vendor.name}?`)) {
    try {
      await vendorsStore.deleteVendor(vendor.id)
    } catch (error) {
      console.error('Failed to delete vendor:', error)
      alert('Failed to delete vendor. Please try again.')
    }
  }
}

const submitVendorForm = async () => {
  submitting.value = true
  try {
    if (editingVendor.value) {
      await vendorsStore.updateVendor(selectedVendor.value.id, vendorForm.value)
    } else {
      await vendorsStore.createVendor(vendorForm.value)
    }
    showCreateModal.value = false
    resetForm()
  } catch (error) {
    console.error('Failed to save vendor:', error)
    alert('Failed to save vendor. Please try again.')
  } finally {
    submitting.value = false
  }
}

const resetForm = () => {
  vendorForm.value = {
    name: '',
    company: '',
    email: '',
    phone: '',
    region: '',
    service_type: '',
    cost_per_kg: 0,
    status: 'active'
  }
  selectedVendor.value = null
  editingVendor.value = false
}

const previousPage = () => {
  if (currentPage.value > 1) {
    currentPage.value--
  }
}

const nextPage = () => {
  if (currentPage.value < totalPages.value) {
    currentPage.value++
  }
}

// Watch for modal close to reset form
watch(showCreateModal, (newValue) => {
  if (!newValue) {
    resetForm()
  }
})

watch(showDetailModal, (newValue) => {
  if (!newValue) {
    selectedVendor.value = null
  }
})

// Reset page when filters change
watch(() => vendorsStore.filters, () => {
  currentPage.value = 1
}, { deep: true })

// Lifecycle
onMounted(async () => {
  // Initialize theme
  themeStore.init()
  
  try {
    await vendorsStore.fetchVendors()
  } catch (error) {
    console.error('Failed to fetch vendors:', error)
  }
})
</script>

<style scoped>
/* Component Animations */
.vendors-page-enhanced {
  animation: fadeIn 0.5s ease-in-out;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Card Animations */
.bg-white,
.dark\:bg-gray-800 {
  transition: all 0.3s ease-in-out;
}

.bg-white:hover,
.dark\:bg-gray-800:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
}

/* Performance Tier Colors */
.performance-tier-excellent {
  background-color: #dcfce7;
  color: #166534;
}

.dark .performance-tier-excellent {
  background-color: #14532d;
  color: #bbf7d0;
}

.performance-tier-good {
  background-color: #dbeafe;
  color: #1e40af;
}

.dark .performance-tier-good {
  background-color: #1e3a8a;
  color: #bfdbfe;
}

.performance-tier-average {
  background-color: #fef3c7;
  color: #92400e;
}

.dark .performance-tier-average {
  background-color: #92400e;
  color: #fde68a;
}

.performance-tier-poor {
  background-color: #fee2e2;
  color: #991b1b;
}

.dark .performance-tier-poor {
  background-color: #991b1b;
  color: #fecaca;
}

/* Chart Container */
.chart-container {
  position: relative;
  overflow: hidden;
}

.chart-container::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(45deg, rgba(59, 130, 246, 0.1), rgba(147, 51, 234, 0.1));
  border-radius: 0.5rem;
}

/* Table Enhancements */
.vendors-table {
  border-collapse: separate;
  border-spacing: 0;
}

.vendors-table th {
  position: sticky;
  top: 0;
  background: white;
  z-index: 10;
  border-bottom: 2px solid #e5e7eb;
}

.dark .vendors-table th {
  background: #1f2937;
  border-bottom-color: #374151;
}

.vendors-table tr {
  transition: all 0.2s ease-in-out;
}

.vendors-table tr:hover {
  background-color: #f9fafb;
  transform: scale(1.01);
}

.dark .vendors-table tr:hover {
  background-color: #374151;
}

/* Status Badge Styles */
.status-badge {
  display: inline-flex;
  align-items: center;
  padding: 0.25rem 0.75rem;
  border-radius: 9999px;
  font-size: 0.75rem;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.status-active {
  background-color: #dcfce7;
  color: #166534;
}

.dark .status-active {
  background-color: #14532d;
  color: #bbf7d0;
}

.status-inactive {
  background-color: #f3f4f6;
  color: #374151;
}

.dark .status-inactive {
  background-color: #374151;
  color: #d1d5db;
}

.status-suspended {
  background-color: #fee2e2;
  color: #991b1b;
}

.dark .status-suspended {
  background-color: #991b1b;
  color: #fecaca;
}

/* Action Button Styles */
.action-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.5rem;
  border-radius: 0.375rem;
  transition: all 0.2s ease-in-out;
  cursor: pointer;
}

.action-button:hover {
  transform: scale(1.1);
}

.action-button-view {
  background-color: #dbeafe;
  color: #2563eb;
}

.action-button-view:hover {
  background-color: #bfdbfe;
}

.dark .action-button-view {
  background-color: #1e3a8a;
  color: #93c5fd;
}

.dark .action-button-view:hover {
  background-color: #1e40af;
}

.action-button-edit {
  background-color: #fef3c7;
  color: #d97706;
}

.action-button-edit:hover {
  background-color: #fde68a;
}

.dark .action-button-edit {
  background-color: #92400e;
  color: #fcd34d;
}

.dark .action-button-edit:hover {
  background-color: #b45309;
}

.action-button-delete {
  background-color: #fee2e2;
  color: #dc2626;
}

.action-button-delete:hover {
  background-color: #fecaca;
}

.dark .action-button-delete {
  background-color: #991b1b;
  color: #f87171;
}

.dark .action-button-delete:hover {
  background-color: #b91c1c;
}

/* Modal Animations */
.modal-backdrop {
  animation: backdropFadeIn 0.3s ease-out;
}

.modal-content {
  animation: modalSlideIn 0.3s ease-out;
}

@keyframes backdropFadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes modalSlideIn {
  from {
    opacity: 0;
    transform: translateY(-20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* Form Enhancements */
.form-input {
  transition: all 0.2s ease-in-out;
}

.form-input:focus {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);
}

/* Loading Spinner Container */
.loading-container {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 400px;
}

/* Pagination Styles */
.pagination-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.5rem 1rem;
  border-radius: 0.375rem;
  font-weight: 500;
  transition: all 0.2s ease-in-out;
  cursor: pointer;
}

.pagination-button:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.pagination-button:disabled {
  cursor: not-allowed;
  opacity: 0.5;
}

/* Filter Section */
.filter-section {
  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
  border-radius: 0.75rem;
  padding: 1.5rem;
  margin-bottom: 2rem;
}

.dark .filter-section {
  background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
}

/* Statistics Cards */
.stat-card {
  background: white;
  border-radius: 0.75rem;
  padding: 1.5rem;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease-in-out;
  position: relative;
  overflow: hidden;
}

.stat-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(90deg, #3b82f6, #8b5cf6);
}

.dark .stat-card {
  background: #1f2937;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
}

.stat-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
}

/* Performance Analytics */
.analytics-section {
  background: white;
  border-radius: 0.75rem;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  overflow: hidden;
}

.dark .analytics-section {
  background: #1f2937;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
}

/* Top Performers List */
.top-performer-item {
  padding: 1rem;
  border-radius: 0.5rem;
  background: #f8fafc;
  transition: all 0.2s ease-in-out;
  cursor: pointer;
}

.top-performer-item:hover {
  background: #e2e8f0;
  transform: translateX(4px);
}

.dark .top-performer-item {
  background: #374151;
}

.dark .top-performer-item:hover {
  background: #4b5563;
}

/* Cost Analysis */
.cost-indicator {
  position: relative;
  padding: 0.5rem 1rem;
  border-radius: 0.375rem;
  font-weight: 500;
  text-align: center;
}

.cost-indicator.economic {
  background: linear-gradient(135deg, #dcfce7, #bbf7d0);
  color: #166534;
}

.cost-indicator.premium {
  background: linear-gradient(135deg, #fef3c7, #fde68a);
  color: #92400e;
}

.dark .cost-indicator.economic {
  background: linear-gradient(135deg, #064e3b, #065f46);
  color: #86efac;
}

.dark .cost-indicator.premium {
  background: linear-gradient(135deg, #78350f, #92400e);
  color: #fbbf24;
}

/* Responsive Design */
@media (max-width: 768px) {
  .vendors-page-enhanced {
    padding: 1rem;
  }
  
  .stat-card {
    padding: 1rem;
  }
  
  .filter-section {
    padding: 1rem;
  }
  
  .vendors-table {
    font-size: 0.875rem;
  }
  
  .action-button {
    padding: 0.375rem;
  }
}

@media (max-width: 640px) {
  .vendors-table th,
  .vendors-table td {
    padding: 0.5rem 0.25rem;
  }
  
  .modal-content {
    margin: 1rem;
    width: calc(100% - 2rem);
  }
}

/* Dark Mode Transitions */
* {
  transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out, border-color 0.2s ease-in-out;
}

/* Custom Scrollbar */
.vendors-table-container::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.vendors-table-container::-webkit-scrollbar-track {
  background: #f1f5f9;
  border-radius: 4px;
}

.vendors-table-container::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 4px;
}

.vendors-table-container::-webkit-scrollbar-thumb:hover {
  background: #94a3b8;
}

.dark .vendors-table-container::-webkit-scrollbar-track {
  background: #334155;
}

.dark .vendors-table-container::-webkit-scrollbar-thumb {
  background: #64748b;
}

.dark .vendors-table-container::-webkit-scrollbar-thumb:hover {
  background: #475569;
}

/* Print Styles */
@media print {
  .vendors-page-enhanced {
    background: white;
    color: black;
  }
  
  .action-button,
  .pagination-button,
  .modal-backdrop {
    display: none;
  }
  
  .stat-card,
  .analytics-section {
    box-shadow: none;
    border: 1px solid #e5e7eb;
  }
}
</style>